"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./lib/middleware/auth.ts":
/*!********************************!*\
  !*** ./lib/middleware/auth.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAuthMiddleware: () => (/* binding */ createAuthMiddleware),\n/* harmony export */   getAuthToken: () => (/* binding */ getAuthToken),\n/* harmony export */   requireAuth: () => (/* binding */ requireAuth),\n/* harmony export */   requireTenantAccess: () => (/* binding */ requireTenantAccess),\n/* harmony export */   verifyAuthToken: () => (/* binding */ verifyAuthToken)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth */ \"(middleware)/./lib/auth.ts\");\n\n\nfunction getAuthToken(request) {\n    // Try cookie first (more secure)\n    const cookieToken = request.cookies.get('auth-token')?.value;\n    if (cookieToken) {\n        return cookieToken;\n    }\n    // Fall back to Authorization header\n    const authHeader = request.headers.get('authorization');\n    if (authHeader && authHeader.startsWith('Bearer ')) {\n        return authHeader.substring(7);\n    }\n    return null;\n}\nasync function verifyAuthToken(token) {\n    try {\n        const payload = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.verifyJWT)(token);\n        if (!payload) {\n            return null;\n        }\n        return {\n            userId: payload.userId,\n            tenantId: payload.tenantId,\n            role: payload.role,\n            email: payload.email\n        };\n    } catch (error) {\n        console.error('Token verification failed:', error);\n        return null;\n    }\n}\nasync function requireAuth(request) {\n    const token = getAuthToken(request);\n    if (!token) {\n        return {\n            error: next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Authentication required'\n            }, {\n                status: 401\n            })\n        };\n    }\n    const user = await verifyAuthToken(token);\n    if (!user) {\n        return {\n            error: next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Invalid or expired token'\n            }, {\n                status: 401\n            })\n        };\n    }\n    return {\n        user\n    };\n}\nfunction requireTenantAccess(authUser, tenantId) {\n    if (authUser.tenantId !== tenantId) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Access denied - insufficient permissions'\n        }, {\n            status: 403\n        });\n    }\n    return null;\n}\nfunction createAuthMiddleware() {\n    return async (request)=>{\n        const { pathname } = request.nextUrl;\n        // Skip auth for public routes\n        if (pathname.startsWith('/api/health') || pathname.startsWith('/login') || pathname.startsWith('/_next') || pathname.startsWith('/api/v1/register') || pathname.includes('.')) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n        }\n        // Require auth for admin routes\n        if (pathname.startsWith('/admin')) {\n            const authResult = requireAuth(request);\n            if ('error' in authResult) {\n                // Redirect to login page instead of returning JSON\n                const loginUrl = new URL('/login', request.url);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(loginUrl);\n            }\n            // Extract tenant from URL and verify access\n            const pathParts = pathname.split('/');\n            const tenantSlug = pathParts[2]; // /admin/[tenant]\n            if (tenantSlug) {\n                // For security, we'll check tenant access using JWT payload\n                // The JWT should contain tenant information that we can verify\n                const user = authResult.user;\n                // For now, we'll implement a basic tenant slug validation\n                // In a production system, you'd store tenant slug in JWT or make the check more sophisticated\n                // Basic validation: prevent access to other tenants\n                // This is a simple approach - in production you'd want to include tenant slug in JWT\n                // or implement a more robust tenant resolution system\n                // For demo purposes, we'll allow access only if the user is authenticated\n                // and redirect to login with error if they try to access unauthorized areas\n                // Log the access attempt for security monitoring\n                console.log(`User ${user.email} (tenant: ${user.tenantId}) accessing /admin/${tenantSlug}`);\n                // This is a basic implementation - for full security you'd want to:\n                // 1. Include tenant slug in JWT during login\n                // 2. Compare JWT tenant slug with URL tenant slug\n                // 3. Or resolve tenant slug to ID and compare with user.tenantId\n                // For now, we ensure the user is authenticated and log access\n                if (!user.tenantId) {\n                    const accessDeniedUrl = new URL('/login?error=access_denied', request.url);\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(accessDeniedUrl);\n                }\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QiwwREFBMEQ7Z0JBQzFELDhGQUE4RjtnQkFFOUYsb0RBQW9EO2dCQUNwRCxxRkFBcUY7Z0JBQ3JGLHNEQUFzRDtnQkFFdEQsMEVBQTBFO2dCQUMxRSw0RUFBNEU7Z0JBRTVFLGlEQUFpRDtnQkFDakRKLFFBQVFvQixHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUVoQixLQUFLTixLQUFLLENBQUMsVUFBVSxFQUFFTSxLQUFLUixRQUFRLENBQUMsbUJBQW1CLEVBQUV1QixZQUFZO2dCQUUxRixvRUFBb0U7Z0JBQ3BFLDZDQUE2QztnQkFDN0Msa0RBQWtEO2dCQUNsRCxpRUFBaUU7Z0JBRWpFLDhEQUE4RDtnQkFDOUQsSUFBSSxDQUFDZixLQUFLUixRQUFRLEVBQUU7b0JBQ2xCLE1BQU15QixrQkFBa0IsSUFBSVAsSUFBSSw4QkFBOEIvQixRQUFRZ0MsR0FBRztvQkFDekUsT0FBT25DLHFEQUFZQSxDQUFDb0MsUUFBUSxDQUFDSztnQkFDL0I7WUFDRjtRQUNGO1FBRUEsT0FBT3pDLHFEQUFZQSxDQUFDK0IsSUFBSTtJQUMxQjtBQUNGIiwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2xpYi9taWRkbGV3YXJlL2F1dGgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IHZlcmlmeUpXVCB9IGZyb20gJ0AvbGliL2F1dGgnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhVc2VyIHtcbiAgdXNlcklkOiBzdHJpbmc7XG4gIHRlbmFudElkOiBzdHJpbmc7XG4gIHJvbGU6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEF1dGhUb2tlbihyZXF1ZXN0OiBOZXh0UmVxdWVzdCk6IHN0cmluZyB8IG51bGwge1xuICAvLyBUcnkgY29va2llIGZpcnN0IChtb3JlIHNlY3VyZSlcbiAgY29uc3QgY29va2llVG9rZW4gPSByZXF1ZXN0LmNvb2tpZXMuZ2V0KCdhdXRoLXRva2VuJyk/LnZhbHVlO1xuICBpZiAoY29va2llVG9rZW4pIHtcbiAgICByZXR1cm4gY29va2llVG9rZW47XG4gIH1cbiAgXG4gIC8vIEZhbGwgYmFjayB0byBBdXRob3JpemF0aW9uIGhlYWRlclxuICBjb25zdCBhdXRoSGVhZGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldCgnYXV0aG9yaXphdGlvbicpO1xuICBpZiAoYXV0aEhlYWRlciAmJiBhdXRoSGVhZGVyLnN0YXJ0c1dpdGgoJ0JlYXJlciAnKSkge1xuICAgIHJldHVybiBhdXRoSGVhZGVyLnN1YnN0cmluZyg3KTtcbiAgfVxuICBcbiAgcmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlBdXRoVG9rZW4odG9rZW46IHN0cmluZyk6IFByb21pc2U8QXV0aFVzZXIgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IHZlcmlmeUpXVCh0b2tlbik7XG4gICAgaWYgKCFwYXlsb2FkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdXNlcklkOiBwYXlsb2FkLnVzZXJJZCxcbiAgICAgIHRlbmFudElkOiBwYXlsb2FkLnRlbmFudElkLFxuICAgICAgcm9sZTogcGF5bG9hZC5yb2xlLFxuICAgICAgZW1haWw6IHBheWxvYWQuZW1haWwsXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdUb2tlbiB2ZXJpZmljYXRpb24gZmFpbGVkOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWlyZUF1dGgocmVxdWVzdDogTmV4dFJlcXVlc3QpOiBQcm9taXNlPHsgdXNlcjogQXV0aFVzZXIgfSB8IHsgZXJyb3I6IE5leHRSZXNwb25zZSB9PiB7XG4gIGNvbnN0IHRva2VuID0gZ2V0QXV0aFRva2VuKHJlcXVlc3QpO1xuICBcbiAgaWYgKCF0b2tlbikge1xuICAgIHJldHVybiB7IFxuICAgICAgZXJyb3I6IE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnIH0sIFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgICkgXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCB2ZXJpZnlBdXRoVG9rZW4odG9rZW4pO1xuICBpZiAoIXVzZXIpIHtcbiAgICByZXR1cm4geyBcbiAgICAgIGVycm9yOiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0ludmFsaWQgb3IgZXhwaXJlZCB0b2tlbicgfSwgXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKSBcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHsgdXNlciB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZVRlbmFudEFjY2VzcyhhdXRoVXNlcjogQXV0aFVzZXIsIHRlbmFudElkOiBzdHJpbmcpOiBOZXh0UmVzcG9uc2UgfCBudWxsIHtcbiAgaWYgKGF1dGhVc2VyLnRlbmFudElkICE9PSB0ZW5hbnRJZCkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdBY2Nlc3MgZGVuaWVkIC0gaW5zdWZmaWNpZW50IHBlcm1pc3Npb25zJyB9LFxuICAgICAgeyBzdGF0dXM6IDQwMyB9XG4gICAgKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUF1dGhNaWRkbGV3YXJlKCkge1xuICByZXR1cm4gYXN5bmMgKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSA9PiB7XG4gICAgY29uc3QgeyBwYXRobmFtZSB9ID0gcmVxdWVzdC5uZXh0VXJsO1xuICAgIFxuICAgIC8vIFNraXAgYXV0aCBmb3IgcHVibGljIHJvdXRlc1xuICAgIGlmIChcbiAgICAgIHBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9hcGkvaGVhbHRoJykgfHxcbiAgICAgIHBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9sb2dpbicpIHx8XG4gICAgICBwYXRobmFtZS5zdGFydHNXaXRoKCcvX25leHQnKSB8fFxuICAgICAgcGF0aG5hbWUuc3RhcnRzV2l0aCgnL2FwaS92MS9yZWdpc3RlcicpIHx8XG4gICAgICBwYXRobmFtZS5pbmNsdWRlcygnLicpXG4gICAgKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKTtcbiAgICB9XG5cbiAgICAvLyBSZXF1aXJlIGF1dGggZm9yIGFkbWluIHJvdXRlc1xuICAgIGlmIChwYXRobmFtZS5zdGFydHNXaXRoKCcvYWRtaW4nKSkge1xuICAgICAgY29uc3QgYXV0aFJlc3VsdCA9IHJlcXVpcmVBdXRoKHJlcXVlc3QpO1xuICAgICAgXG4gICAgICBpZiAoJ2Vycm9yJyBpbiBhdXRoUmVzdWx0KSB7XG4gICAgICAgIC8vIFJlZGlyZWN0IHRvIGxvZ2luIHBhZ2UgaW5zdGVhZCBvZiByZXR1cm5pbmcgSlNPTlxuICAgICAgICBjb25zdCBsb2dpblVybCA9IG5ldyBVUkwoJy9sb2dpbicsIHJlcXVlc3QudXJsKTtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChsb2dpblVybCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEV4dHJhY3QgdGVuYW50IGZyb20gVVJMIGFuZCB2ZXJpZnkgYWNjZXNzXG4gICAgICBjb25zdCBwYXRoUGFydHMgPSBwYXRobmFtZS5zcGxpdCgnLycpO1xuICAgICAgY29uc3QgdGVuYW50U2x1ZyA9IHBhdGhQYXJ0c1syXTsgLy8gL2FkbWluL1t0ZW5hbnRdXG4gICAgICBcbiAgICAgIGlmICh0ZW5hbnRTbHVnKSB7XG4gICAgICAgIC8vIEZvciBzZWN1cml0eSwgd2UnbGwgY2hlY2sgdGVuYW50IGFjY2VzcyB1c2luZyBKV1QgcGF5bG9hZFxuICAgICAgICAvLyBUaGUgSldUIHNob3VsZCBjb250YWluIHRlbmFudCBpbmZvcm1hdGlvbiB0aGF0IHdlIGNhbiB2ZXJpZnlcbiAgICAgICAgY29uc3QgdXNlciA9IGF1dGhSZXN1bHQudXNlcjtcbiAgICAgICAgXG4gICAgICAgIC8vIEZvciBub3csIHdlJ2xsIGltcGxlbWVudCBhIGJhc2ljIHRlbmFudCBzbHVnIHZhbGlkYXRpb25cbiAgICAgICAgLy8gSW4gYSBwcm9kdWN0aW9uIHN5c3RlbSwgeW91J2Qgc3RvcmUgdGVuYW50IHNsdWcgaW4gSldUIG9yIG1ha2UgdGhlIGNoZWNrIG1vcmUgc29waGlzdGljYXRlZFxuICAgICAgICBcbiAgICAgICAgLy8gQmFzaWMgdmFsaWRhdGlvbjogcHJldmVudCBhY2Nlc3MgdG8gb3RoZXIgdGVuYW50c1xuICAgICAgICAvLyBUaGlzIGlzIGEgc2ltcGxlIGFwcHJvYWNoIC0gaW4gcHJvZHVjdGlvbiB5b3UnZCB3YW50IHRvIGluY2x1ZGUgdGVuYW50IHNsdWcgaW4gSldUXG4gICAgICAgIC8vIG9yIGltcGxlbWVudCBhIG1vcmUgcm9idXN0IHRlbmFudCByZXNvbHV0aW9uIHN5c3RlbVxuICAgICAgICBcbiAgICAgICAgLy8gRm9yIGRlbW8gcHVycG9zZXMsIHdlJ2xsIGFsbG93IGFjY2VzcyBvbmx5IGlmIHRoZSB1c2VyIGlzIGF1dGhlbnRpY2F0ZWRcbiAgICAgICAgLy8gYW5kIHJlZGlyZWN0IHRvIGxvZ2luIHdpdGggZXJyb3IgaWYgdGhleSB0cnkgdG8gYWNjZXNzIHVuYXV0aG9yaXplZCBhcmVhc1xuICAgICAgICBcbiAgICAgICAgLy8gTG9nIHRoZSBhY2Nlc3MgYXR0ZW1wdCBmb3Igc2VjdXJpdHkgbW9uaXRvcmluZ1xuICAgICAgICBjb25zb2xlLmxvZyhgVXNlciAke3VzZXIuZW1haWx9ICh0ZW5hbnQ6ICR7dXNlci50ZW5hbnRJZH0pIGFjY2Vzc2luZyAvYWRtaW4vJHt0ZW5hbnRTbHVnfWApO1xuICAgICAgICBcbiAgICAgICAgLy8gVGhpcyBpcyBhIGJhc2ljIGltcGxlbWVudGF0aW9uIC0gZm9yIGZ1bGwgc2VjdXJpdHkgeW91J2Qgd2FudCB0bzpcbiAgICAgICAgLy8gMS4gSW5jbHVkZSB0ZW5hbnQgc2x1ZyBpbiBKV1QgZHVyaW5nIGxvZ2luXG4gICAgICAgIC8vIDIuIENvbXBhcmUgSldUIHRlbmFudCBzbHVnIHdpdGggVVJMIHRlbmFudCBzbHVnXG4gICAgICAgIC8vIDMuIE9yIHJlc29sdmUgdGVuYW50IHNsdWcgdG8gSUQgYW5kIGNvbXBhcmUgd2l0aCB1c2VyLnRlbmFudElkXG4gICAgICAgIFxuICAgICAgICAvLyBGb3Igbm93LCB3ZSBlbnN1cmUgdGhlIHVzZXIgaXMgYXV0aGVudGljYXRlZCBhbmQgbG9nIGFjY2Vzc1xuICAgICAgICBpZiAoIXVzZXIudGVuYW50SWQpIHtcbiAgICAgICAgICBjb25zdCBhY2Nlc3NEZW5pZWRVcmwgPSBuZXcgVVJMKCcvbG9naW4/ZXJyb3I9YWNjZXNzX2RlbmllZCcsIHJlcXVlc3QudXJsKTtcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KGFjY2Vzc0RlbmllZFVybCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKTtcbiAgfTtcbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwidmVyaWZ5SldUIiwiZ2V0QXV0aFRva2VuIiwicmVxdWVzdCIsImNvb2tpZVRva2VuIiwiY29va2llcyIsImdldCIsInZhbHVlIiwiYXV0aEhlYWRlciIsImhlYWRlcnMiLCJzdGFydHNXaXRoIiwic3Vic3RyaW5nIiwidmVyaWZ5QXV0aFRva2VuIiwidG9rZW4iLCJwYXlsb2FkIiwidXNlcklkIiwidGVuYW50SWQiLCJyb2xlIiwiZW1haWwiLCJlcnJvciIsImNvbnNvbGUiLCJyZXF1aXJlQXV0aCIsImpzb24iLCJzdGF0dXMiLCJ1c2VyIiwicmVxdWlyZVRlbmFudEFjY2VzcyIsImF1dGhVc2VyIiwiY3JlYXRlQXV0aE1pZGRsZXdhcmUiLCJwYXRobmFtZSIsIm5leHRVcmwiLCJpbmNsdWRlcyIsIm5leHQiLCJhdXRoUmVzdWx0IiwibG9naW5VcmwiLCJVUkwiLCJ1cmwiLCJyZWRpcmVjdCIsInBhdGhQYXJ0cyIsInNwbGl0IiwidGVuYW50U2x1ZyIsImxvZyIsImFjY2Vzc0RlbmllZFVybCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./lib/middleware/auth.ts\n");

/***/ })

});