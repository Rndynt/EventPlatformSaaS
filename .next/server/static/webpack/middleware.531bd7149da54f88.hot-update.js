"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./lib/middleware/auth.ts":
/*!********************************!*\
  !*** ./lib/middleware/auth.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAuthMiddleware: () => (/* binding */ createAuthMiddleware),\n/* harmony export */   getAuthToken: () => (/* binding */ getAuthToken),\n/* harmony export */   requireAuth: () => (/* binding */ requireAuth),\n/* harmony export */   requireTenantAccess: () => (/* binding */ requireTenantAccess),\n/* harmony export */   verifyAuthToken: () => (/* binding */ verifyAuthToken)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth */ \"(middleware)/./lib/auth.ts\");\n\n\nfunction getAuthToken(request) {\n    // Try cookie first (more secure)\n    const cookieToken = request.cookies.get('auth-token')?.value;\n    if (cookieToken) {\n        return cookieToken;\n    }\n    // Fall back to Authorization header\n    const authHeader = request.headers.get('authorization');\n    if (authHeader && authHeader.startsWith('Bearer ')) {\n        return authHeader.substring(7);\n    }\n    return null;\n}\nasync function verifyAuthToken(token) {\n    try {\n        const payload = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.verifyJWT)(token);\n        if (!payload) {\n            return null;\n        }\n        return {\n            userId: payload.userId,\n            tenantId: payload.tenantId,\n            role: payload.role,\n            email: payload.email\n        };\n    } catch (error) {\n        console.error('Token verification failed:', error);\n        return null;\n    }\n}\nfunction requireAuth(request) {\n    const token = getAuthToken(request);\n    if (!token) {\n        return {\n            error: next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Authentication required'\n            }, {\n                status: 401\n            })\n        };\n    }\n    const user = verifyAuthToken(token);\n    if (!user) {\n        return {\n            error: next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Invalid or expired token'\n            }, {\n                status: 401\n            })\n        };\n    }\n    return {\n        user\n    };\n}\nfunction requireTenantAccess(authUser, tenantId) {\n    if (authUser.tenantId !== tenantId) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Access denied - insufficient permissions'\n        }, {\n            status: 403\n        });\n    }\n    return null;\n}\nfunction createAuthMiddleware() {\n    return (request)=>{\n        const { pathname } = request.nextUrl;\n        // Skip auth for public routes\n        if (pathname.startsWith('/api/health') || pathname.startsWith('/login') || pathname.startsWith('/_next') || pathname.startsWith('/api/v1/register') || pathname.includes('.')) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n        }\n        // Require auth for admin routes\n        if (pathname.startsWith('/admin')) {\n            const authResult = requireAuth(request);\n            if ('error' in authResult) {\n                // Redirect to login page instead of returning JSON\n                const loginUrl = new URL('/login', request.url);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(loginUrl);\n            }\n            // Extract tenant from URL and verify access\n            const pathParts = pathname.split('/');\n            const tenantSlug = pathParts[2]; // /admin/[tenant]\n            if (tenantSlug) {\n                // For security, we'll check tenant access using JWT payload\n                // The JWT should contain tenant information that we can verify\n                const user = authResult.user;\n                // For now, we'll implement a basic tenant slug validation\n                // In a production system, you'd store tenant slug in JWT or make the check more sophisticated\n                // Basic validation: prevent access to other tenants\n                // This is a simple approach - in production you'd want to include tenant slug in JWT\n                // or implement a more robust tenant resolution system\n                // For demo purposes, we'll allow access only if the user is authenticated\n                // and redirect to login with error if they try to access unauthorized areas\n                // Log the access attempt for security monitoring\n                console.log(`User ${user.email} (tenant: ${user.tenantId}) accessing /admin/${tenantSlug}`);\n                // This is a basic implementation - for full security you'd want to:\n                // 1. Include tenant slug in JWT during login\n                // 2. Compare JWT tenant slug with URL tenant slug\n                // 3. Or resolve tenant slug to ID and compare with user.tenantId\n                // For now, we ensure the user is authenticated and log access\n                if (!user.tenantId) {\n                    const accessDeniedUrl = new URL('/login?error=access_denied', request.url);\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(accessDeniedUrl);\n                }\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTBEO2dCQUMxRCw4RkFBOEY7Z0JBRTlGLG9EQUFvRDtnQkFDcEQscUZBQXFGO2dCQUNyRixzREFBc0Q7Z0JBRXRELDBFQUEwRTtnQkFDMUUsNEVBQTRFO2dCQUU1RSxpREFBaUQ7Z0JBQ2pESixRQUFRb0IsR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFaEIsS0FBS04sS0FBSyxDQUFDLFVBQVUsRUFBRU0sS0FBS1IsUUFBUSxDQUFDLG1CQUFtQixFQUFFdUIsWUFBWTtnQkFFMUYsb0VBQW9FO2dCQUNwRSw2Q0FBNkM7Z0JBQzdDLGtEQUFrRDtnQkFDbEQsaUVBQWlFO2dCQUVqRSw4REFBOEQ7Z0JBQzlELElBQUksQ0FBQ2YsS0FBS1IsUUFBUSxFQUFFO29CQUNsQixNQUFNeUIsa0JBQWtCLElBQUlQLElBQUksOEJBQThCL0IsUUFBUWdDLEdBQUc7b0JBQ3pFLE9BQU9uQyxxREFBWUEsQ0FBQ29DLFFBQVEsQ0FBQ0s7Z0JBQy9CO1lBQ0Y7UUFDRjtRQUVBLE9BQU96QyxxREFBWUEsQ0FBQytCLElBQUk7SUFDMUI7QUFDRiIsInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9saWIvbWlkZGxld2FyZS9hdXRoLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyB2ZXJpZnlKV1QgfSBmcm9tICdAL2xpYi9hdXRoJztcblxuZXhwb3J0IGludGVyZmFjZSBBdXRoVXNlciB7XG4gIHVzZXJJZDogc3RyaW5nO1xuICB0ZW5hbnRJZDogc3RyaW5nO1xuICByb2xlOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBdXRoVG9rZW4ocmVxdWVzdDogTmV4dFJlcXVlc3QpOiBzdHJpbmcgfCBudWxsIHtcbiAgLy8gVHJ5IGNvb2tpZSBmaXJzdCAobW9yZSBzZWN1cmUpXG4gIGNvbnN0IGNvb2tpZVRva2VuID0gcmVxdWVzdC5jb29raWVzLmdldCgnYXV0aC10b2tlbicpPy52YWx1ZTtcbiAgaWYgKGNvb2tpZVRva2VuKSB7XG4gICAgcmV0dXJuIGNvb2tpZVRva2VuO1xuICB9XG4gIFxuICAvLyBGYWxsIGJhY2sgdG8gQXV0aG9yaXphdGlvbiBoZWFkZXJcbiAgY29uc3QgYXV0aEhlYWRlciA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2F1dGhvcml6YXRpb24nKTtcbiAgaWYgKGF1dGhIZWFkZXIgJiYgYXV0aEhlYWRlci5zdGFydHNXaXRoKCdCZWFyZXIgJykpIHtcbiAgICByZXR1cm4gYXV0aEhlYWRlci5zdWJzdHJpbmcoNyk7XG4gIH1cbiAgXG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5QXV0aFRva2VuKHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPEF1dGhVc2VyIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlKV1QodG9rZW4pO1xuICAgIGlmICghcGF5bG9hZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHVzZXJJZDogcGF5bG9hZC51c2VySWQsXG4gICAgICB0ZW5hbnRJZDogcGF5bG9hZC50ZW5hbnRJZCxcbiAgICAgIHJvbGU6IHBheWxvYWQucm9sZSxcbiAgICAgIGVtYWlsOiBwYXlsb2FkLmVtYWlsLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignVG9rZW4gdmVyaWZpY2F0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlcXVpcmVBdXRoKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogeyB1c2VyOiBBdXRoVXNlciB9IHwgeyBlcnJvcjogTmV4dFJlc3BvbnNlIH0ge1xuICBjb25zdCB0b2tlbiA9IGdldEF1dGhUb2tlbihyZXF1ZXN0KTtcbiAgXG4gIGlmICghdG9rZW4pIHtcbiAgICByZXR1cm4geyBcbiAgICAgIGVycm9yOiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJyB9LCBcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApIFxuICAgIH07XG4gIH1cblxuICBjb25zdCB1c2VyID0gdmVyaWZ5QXV0aFRva2VuKHRva2VuKTtcbiAgaWYgKCF1c2VyKSB7XG4gICAgcmV0dXJuIHsgXG4gICAgICBlcnJvcjogTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdJbnZhbGlkIG9yIGV4cGlyZWQgdG9rZW4nIH0sIFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgICkgXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7IHVzZXIgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlcXVpcmVUZW5hbnRBY2Nlc3MoYXV0aFVzZXI6IEF1dGhVc2VyLCB0ZW5hbnRJZDogc3RyaW5nKTogTmV4dFJlc3BvbnNlIHwgbnVsbCB7XG4gIGlmIChhdXRoVXNlci50ZW5hbnRJZCAhPT0gdGVuYW50SWQpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnQWNjZXNzIGRlbmllZCAtIGluc3VmZmljaWVudCBwZXJtaXNzaW9ucycgfSxcbiAgICAgIHsgc3RhdHVzOiA0MDMgfVxuICAgICk7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBdXRoTWlkZGxld2FyZSgpIHtcbiAgcmV0dXJuIChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkgPT4ge1xuICAgIGNvbnN0IHsgcGF0aG5hbWUgfSA9IHJlcXVlc3QubmV4dFVybDtcbiAgICBcbiAgICAvLyBTa2lwIGF1dGggZm9yIHB1YmxpYyByb3V0ZXNcbiAgICBpZiAoXG4gICAgICBwYXRobmFtZS5zdGFydHNXaXRoKCcvYXBpL2hlYWx0aCcpIHx8XG4gICAgICBwYXRobmFtZS5zdGFydHNXaXRoKCcvbG9naW4nKSB8fFxuICAgICAgcGF0aG5hbWUuc3RhcnRzV2l0aCgnL19uZXh0JykgfHxcbiAgICAgIHBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9hcGkvdjEvcmVnaXN0ZXInKSB8fFxuICAgICAgcGF0aG5hbWUuaW5jbHVkZXMoJy4nKVxuICAgICkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KCk7XG4gICAgfVxuXG4gICAgLy8gUmVxdWlyZSBhdXRoIGZvciBhZG1pbiByb3V0ZXNcbiAgICBpZiAocGF0aG5hbWUuc3RhcnRzV2l0aCgnL2FkbWluJykpIHtcbiAgICAgIGNvbnN0IGF1dGhSZXN1bHQgPSByZXF1aXJlQXV0aChyZXF1ZXN0KTtcbiAgICAgIFxuICAgICAgaWYgKCdlcnJvcicgaW4gYXV0aFJlc3VsdCkge1xuICAgICAgICAvLyBSZWRpcmVjdCB0byBsb2dpbiBwYWdlIGluc3RlYWQgb2YgcmV0dXJuaW5nIEpTT05cbiAgICAgICAgY29uc3QgbG9naW5VcmwgPSBuZXcgVVJMKCcvbG9naW4nLCByZXF1ZXN0LnVybCk7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobG9naW5VcmwpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBFeHRyYWN0IHRlbmFudCBmcm9tIFVSTCBhbmQgdmVyaWZ5IGFjY2Vzc1xuICAgICAgY29uc3QgcGF0aFBhcnRzID0gcGF0aG5hbWUuc3BsaXQoJy8nKTtcbiAgICAgIGNvbnN0IHRlbmFudFNsdWcgPSBwYXRoUGFydHNbMl07IC8vIC9hZG1pbi9bdGVuYW50XVxuICAgICAgXG4gICAgICBpZiAodGVuYW50U2x1Zykge1xuICAgICAgICAvLyBGb3Igc2VjdXJpdHksIHdlJ2xsIGNoZWNrIHRlbmFudCBhY2Nlc3MgdXNpbmcgSldUIHBheWxvYWRcbiAgICAgICAgLy8gVGhlIEpXVCBzaG91bGQgY29udGFpbiB0ZW5hbnQgaW5mb3JtYXRpb24gdGhhdCB3ZSBjYW4gdmVyaWZ5XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhdXRoUmVzdWx0LnVzZXI7XG4gICAgICAgIFxuICAgICAgICAvLyBGb3Igbm93LCB3ZSdsbCBpbXBsZW1lbnQgYSBiYXNpYyB0ZW5hbnQgc2x1ZyB2YWxpZGF0aW9uXG4gICAgICAgIC8vIEluIGEgcHJvZHVjdGlvbiBzeXN0ZW0sIHlvdSdkIHN0b3JlIHRlbmFudCBzbHVnIGluIEpXVCBvciBtYWtlIHRoZSBjaGVjayBtb3JlIHNvcGhpc3RpY2F0ZWRcbiAgICAgICAgXG4gICAgICAgIC8vIEJhc2ljIHZhbGlkYXRpb246IHByZXZlbnQgYWNjZXNzIHRvIG90aGVyIHRlbmFudHNcbiAgICAgICAgLy8gVGhpcyBpcyBhIHNpbXBsZSBhcHByb2FjaCAtIGluIHByb2R1Y3Rpb24geW91J2Qgd2FudCB0byBpbmNsdWRlIHRlbmFudCBzbHVnIGluIEpXVFxuICAgICAgICAvLyBvciBpbXBsZW1lbnQgYSBtb3JlIHJvYnVzdCB0ZW5hbnQgcmVzb2x1dGlvbiBzeXN0ZW1cbiAgICAgICAgXG4gICAgICAgIC8vIEZvciBkZW1vIHB1cnBvc2VzLCB3ZSdsbCBhbGxvdyBhY2Nlc3Mgb25seSBpZiB0aGUgdXNlciBpcyBhdXRoZW50aWNhdGVkXG4gICAgICAgIC8vIGFuZCByZWRpcmVjdCB0byBsb2dpbiB3aXRoIGVycm9yIGlmIHRoZXkgdHJ5IHRvIGFjY2VzcyB1bmF1dGhvcml6ZWQgYXJlYXNcbiAgICAgICAgXG4gICAgICAgIC8vIExvZyB0aGUgYWNjZXNzIGF0dGVtcHQgZm9yIHNlY3VyaXR5IG1vbml0b3JpbmdcbiAgICAgICAgY29uc29sZS5sb2coYFVzZXIgJHt1c2VyLmVtYWlsfSAodGVuYW50OiAke3VzZXIudGVuYW50SWR9KSBhY2Nlc3NpbmcgL2FkbWluLyR7dGVuYW50U2x1Z31gKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRoaXMgaXMgYSBiYXNpYyBpbXBsZW1lbnRhdGlvbiAtIGZvciBmdWxsIHNlY3VyaXR5IHlvdSdkIHdhbnQgdG86XG4gICAgICAgIC8vIDEuIEluY2x1ZGUgdGVuYW50IHNsdWcgaW4gSldUIGR1cmluZyBsb2dpblxuICAgICAgICAvLyAyLiBDb21wYXJlIEpXVCB0ZW5hbnQgc2x1ZyB3aXRoIFVSTCB0ZW5hbnQgc2x1Z1xuICAgICAgICAvLyAzLiBPciByZXNvbHZlIHRlbmFudCBzbHVnIHRvIElEIGFuZCBjb21wYXJlIHdpdGggdXNlci50ZW5hbnRJZFxuICAgICAgICBcbiAgICAgICAgLy8gRm9yIG5vdywgd2UgZW5zdXJlIHRoZSB1c2VyIGlzIGF1dGhlbnRpY2F0ZWQgYW5kIGxvZyBhY2Nlc3NcbiAgICAgICAgaWYgKCF1c2VyLnRlbmFudElkKSB7XG4gICAgICAgICAgY29uc3QgYWNjZXNzRGVuaWVkVXJsID0gbmV3IFVSTCgnL2xvZ2luP2Vycm9yPWFjY2Vzc19kZW5pZWQnLCByZXF1ZXN0LnVybCk7XG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChhY2Nlc3NEZW5pZWRVcmwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KCk7XG4gIH07XG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInZlcmlmeUpXVCIsImdldEF1dGhUb2tlbiIsInJlcXVlc3QiLCJjb29raWVUb2tlbiIsImNvb2tpZXMiLCJnZXQiLCJ2YWx1ZSIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwic3RhcnRzV2l0aCIsInN1YnN0cmluZyIsInZlcmlmeUF1dGhUb2tlbiIsInRva2VuIiwicGF5bG9hZCIsInVzZXJJZCIsInRlbmFudElkIiwicm9sZSIsImVtYWlsIiwiZXJyb3IiLCJjb25zb2xlIiwicmVxdWlyZUF1dGgiLCJqc29uIiwic3RhdHVzIiwidXNlciIsInJlcXVpcmVUZW5hbnRBY2Nlc3MiLCJhdXRoVXNlciIsImNyZWF0ZUF1dGhNaWRkbGV3YXJlIiwicGF0aG5hbWUiLCJuZXh0VXJsIiwiaW5jbHVkZXMiLCJuZXh0IiwiYXV0aFJlc3VsdCIsImxvZ2luVXJsIiwiVVJMIiwidXJsIiwicmVkaXJlY3QiLCJwYXRoUGFydHMiLCJzcGxpdCIsInRlbmFudFNsdWciLCJsb2ciLCJhY2Nlc3NEZW5pZWRVcmwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./lib/middleware/auth.ts\n");

/***/ })

});